{% extends 'base.html' %}
{% load static %}

{% block css %}
{% endblock %}


{% block main-content %}
    <!-------------------------- 分类标签 ------------------------------->
    <div class="tags_header" >
        <div class="tags_top">
            <p>类型:</p>
            <div class="tags_top_right">
                <ul id="tag_type">
                    <li><a href="/tages/movie/?type=全部" {% if type == '' %} class="on"{% endif %}>全部</a></li>
                    {% for row in tags %}
                    <li><a href="/tages/movie/?type={{ row.name }}" {% if type == row.name %}class="on"{% endif %}>{{ row.name }}</a></li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <div class="tags_top">
            <p>地区:</p>
            <div class="tags_top_right">
                <ul id="tag_region">
                    <li><a href="/tages/movie/?region=全部" {% if region == '' %}class="on"{% endif %}>全部</a></li>
                    <li><a href="/tages/movie/?region=大陆" {% if region == '大陆' %}class="on"{% endif %}>大陆</a></li>
                    <li><a href="/tages/movie/?region=美国" {% if region == '美国' %}class="on"{% endif %}>美国</a></li>
                    <li><a href="/tages/movie/?region=韩国" {% if region == '韩国' %}class="on"{% endif %}>韩国</a></li>
                    <li><a href="/tages/movie/?region=日本" {% if region == '日本' %}class="on"{% endif %}>日本</a></li>
                    <li><a href="/tages/movie/?region=法国" {% if region == '法国' %}class="on"{% endif %}>法国</a></li>
                    <li><a href="/tages/movie/?region=英国" {% if region == '英国' %}class="on"{% endif %}>英国</a></li>
                    <li><a href="/tages/movie/?region=泰国" {% if region == '泰国' %}class="on"{% endif %}>泰国</a></li>
                    <li><a href="/tages/movie/?region=中国香港" {% if region == '中国香港' %}class="on"{% endif %}>中国香港</a></li>
                    <li><a href="/tages/movie/?region=中国台湾" {% if region == '中国台湾' %}class="on"{% endif %}>中国台湾</a></li>
                    <li><a href="/tages/movie/?region=澳大利亚" {% if region == '澳大利亚' %}class="on"{% endif %}>澳大利亚</a></li>
                    <li><a href="/tages/movie/?region=俄罗斯" {% if region == '俄罗斯' %}class="on"{% endif %}>俄罗斯</a></li>
                    <li><a href="/tages/movie/?region=意大利" {% if region == '意大利' %}class="on"{% endif %}>意大利</a></li>
                    <li><a href="/tages/movie/?region=西班牙" {% if region == '西班牙' %}class="on"{% endif %}>西班牙</a></li>
                    <li><a href="/tages/movie/?region=德国" {% if region == '德国' %}class="on"{% endif %}>德国</a></li>
                    <li><a href="/tages/movie/?region=波兰" {% if region == '波兰' %}class="on"{% endif %}>波兰</a></li>
                    <li><a href="/tages/movie/?region=印度" {% if region == '印度' %}class="on"{% endif %}>印度</a></li>
                    <li><a href="/tages/movie/?region=伊朗" {% if region == '伊朗' %}class="on"{% endif %}>伊朗</a></li>
                </ul>
            </div>
        </div>
    </div>
     <!------------------------------ main-movies 列表--------------------------->
    <div class="main-movies">
        <div class="dy-content">
            <div class="dy-videos">
                <ul class="dy-video-list" >
                    {% for row in movies %}
                        <li class="dy-video-item ">
                            <div class="dy-video-meta">
                                <div class="dy-video-meta-bg"></div>
                                <div class="dy-video-meta-dy">
                                    <h4 class="dy-video-title"><a> {{ row.name }} </a></h4>
{#                                    <span class="dy-video-rating">{{ row.d_rate }}</span>#}
                                    <ul class="dy-video-meta-list">
                                        <li class="dy-video-actors">
                                            <span class="dy-video-tip"> 主演: </span>
                                            <a>{{ row.leader }}</a>
                                        </li>
                                        <li class="dy-video-actors">
                                            <span class="dy-video-tip">导演:</span>
                                            <span class="dy-video-meta-filter">{{ row.director }}</span>
                                        </li>
                                        <li class="dy-video-actors">
                                            <span class="dy-video-tip">标签:</span>
                                            <span class="dy-video-meta-filter">{{ row.label}}</span>
                                        </li>
                                        <li class="dy-video-actors">
                                            <span class="dy-video-tip">地区:</span>
                                            <span class="dy-video-meta-filter">{{ row.country }}</span>
                                        </li>
                                        <li class="dy-video-actors">
                                            <span class="dy-video-tip">语言:</span>
                                            <span class="dy-video-meta-filter">{{ row.language }}</span>
                                        </li>
                                    </ul>
                                    <p class="dy-video-intro">
                                        <!-- 详情 --->
                                        <a class="dy-video-intro-more" href="{% url 'detail' row.id%}">点击查看详情</a>
                                    </p>
                                </div>
                                <div class="dy-video-meta-bg"></div>
                            </div>
                            <div class="dy-video-poster">
                                <a class="dy-video-link">
                                    <img class="dy-video-img"  src="{% static 'images/' %}{{ row.image_link | safe }}" >
                                    <span  class="dy-video-nocomplete"></span>
                                    <span class="dy-video-date"> {{ row.years | safe | slice:'4'}} 年 </span>
                                    <span class="dy-video-bg"></span>
                                    <span class="s-pay"></span>
                                </a>
                            </div>
                            <div class="dy-video-primary">
                                <h4 class="dy-video-title">
                                    <a> {{ row.name }} </a>
                                </h4>
                                <span class="dy-video-rating">
                                    {% if row.d_rate is None %}
                                        暂无
                                    {% else %}
                                    {{ row.d_rate }}
                                    {% endif %}
                                </span>
                            </div>
                        </li>
                    {% endfor %}


                </ul>
            </div>
        </div>
    </div>


    <!------------------------  分页 ----------------------------->
    <div class="row" align="center" style="margin-right: 0;margin-left: 0;">
        {% if movies.has_other_pages %}
            <ul class="pagination bg-yellow">
                {% if movies.has_previous %}
                    <li><a href="?page={{ movies.previous_page_number }}">上一页</a></li>
                {% else %}
                    <li class="disabled"><span>&laquo;</span></li>
                {% endif %}
                {% for l in  movies.paginator.page_range %}
                    {% if l <= movies.number|add:5 and l >= movies.number|add:-5 %}
                        {% if movies.number == l %}
                            <li class="active"><span>{{ l }} <span class="sr-only">(current)</span></span></li>
                        {% else %}
                            <li><a href="?page={{ forloop.counter }}">{{ forloop.counter }}</a></li>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <li class="item"><a href="#">
                    {{ movies.number }}/{{ movies.paginator.num_pages }}</a>
                </li>
                {% if movies.has_next %}
                    <li><a href="?page={{ movies.next_page_number }}">下一页</a></li>
                {% else %}
                    <li class="disabled"><span>&raquo;</span></li>
                {% endif %}
            </ul>
        {% endif %}
    </div>
{% endblock %}


{% block js %}
   <script type="text/javascript">
         $('.menu ul').find('li').eq(1).addClass('active');
    </script>
{% endblock %}